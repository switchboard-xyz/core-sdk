"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5522],{54852:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(49231);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),h=a,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||o;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},92153:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=r(95634),a=(r(49231),r(54852));const o={keywords:["Switchboard","web3","oracle","data feeds","vrf","randomness","solana","aptos","near"]},i="The Oracle Program",s={unversionedId:"oracle-program",id:"oracle-program",title:"The Oracle Program",description:"The Switchboard oracle program (or previously referred to as Switchboard V2) is",source:"@site/docs/oracle-program.mdx",sourceDirName:".",slug:"/oracle-program",permalink:"/oracle-program",draft:!1,tags:[],version:"current",frontMatter:{keywords:["Switchboard","web3","oracle","data feeds","vrf","randomness","solana","aptos","near"]},sidebar:"gettingStartedSidebar",previous:{title:"The Data Models",permalink:"/data-models"},next:{title:"The Attestation Program",permalink:"/attestation-program"}},l={},c=[{value:"Oracle Queues",id:"oracle-queues",level:2},{value:"Oracle Assignment",id:"oracle-assignment",level:3},{value:"Heartbeat Requirement",id:"heartbeat-requirement",level:4},{value:"Round-Robin Assignment",id:"round-robin-assignment",level:4},{value:"Periodic Swapping of Oracle Positions",id:"periodic-swapping-of-oracle-positions",level:4},{value:"Access Control",id:"access-control",level:3},{value:"Economic Security",id:"economic-security",level:3},{value:"Governance",id:"governance",level:3}],u={toc:c},p="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"the-oracle-program"},"The Oracle Program"),(0,a.kt)("p",null,"The Switchboard oracle program (or previously referred to as Switchboard V2) is\nthe core Switchboard contract which enables on-chain resources, like\n",(0,a.kt)("a",{parentName:"p",href:"/data-feeds"},"Data Feeds (or Aggregators)")," or ",(0,a.kt)("a",{parentName:"p",href:"/randomness"},"Randomness"),", to\nrequest off-chain updates from a round-robin queue of oracles who are required\nto heartbeat periodically to signal readiness."),(0,a.kt)("h2",{id:"oracle-queues"},"Oracle Queues"),(0,a.kt)("p",null,"Each oracle queue in the Switchboard network is independent and maintain their\nown configurations which influences its level of security. This design choice\nenables users to tailor the oracle queue's behavior to match their specific use\ncase."),(0,a.kt)("h3",{id:"oracle-assignment"},"Oracle Assignment"),(0,a.kt)("p",null,"The Switchboard Network employs a round-robin approach to assign update requests\nto oracles. This section explains the key aspects of this method and its\nbenefits for the network."),(0,a.kt)("h4",{id:"heartbeat-requirement"},"Heartbeat Requirement"),(0,a.kt)("p",null,"Oracles are required to periodically heartbeat on-chain before the\n",(0,a.kt)("inlineCode",{parentName:"p"},"queue.oracleTimeout")," to signal their readiness. If an oracle fails to heartbeat\nwithin this time frame, it will be temporarily removed from the queue and won't\nbe assigned any update requests until it successfully heartbeats again."),(0,a.kt)("p",null,"The queue utilizes ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.gcIdx")," to track its garbage collection index. If an\noracle fails to send a heartbeat before ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.oracleTimeout"),", it is removed\nfrom the queue until it sends a successful heartbeat again. This process ensures\nthat only active oracles are assigned resource update requests."),(0,a.kt)("h4",{id:"round-robin-assignment"},"Round-Robin Assignment"),(0,a.kt)("p",null,"Update requests are assigned to oracles in a round-robin fashion, ensuring a\nfair distribution of tasks among oracles. Aggregators or data feeds can specify\nthe number of oracles (N) required for each request. The system will then assign\nthe next N oracles in the queue to fulfill the request. If there are not enough\noracles in the queue, the update request will fail."),(0,a.kt)("h4",{id:"periodic-swapping-of-oracle-positions"},"Periodic Swapping of Oracle Positions"),(0,a.kt)("p",null,"To provide an element of unpredictability and mitigate the risk of oracles being\nassigned the same update requests in every iteration, oracle positions in the\nqueue are periodically swapped. This helps to further distribute tasks fairly\nand enhances the overall security of the network."),(0,a.kt)("h3",{id:"access-control"},"Access Control"),(0,a.kt)("p",null,"The Switchboard Network provides flexible access control options for each oracle\nqueue, allowing queue operators to define whether data consumers need\npre-approval or whether any requester can access the queue. This feature allows\nusers to maintain control over their data resources and the level of security\nthey require."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Oracles are ",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("strong",{parentName:"em"},"always"))," required to be granted ",(0,a.kt)("inlineCode",{parentName:"p"},"PermitOracleHeartbeat"),"\npermissions before joining a queue."),(0,a.kt)("p",{parentName:"admonition"},"With Switchboard V3 oracles are pre-approved as long as they verify their\nMRENCLAVE measurements proving they are running a given software baseline within\na trusted execution environment.")),(0,a.kt)("h3",{id:"economic-security"},"Economic Security"),(0,a.kt)("p",null,"Economic incentives are employed to encourage oracles to act honestly and\nprovide accurate data. These incentives form the basis of the queue's security\nmodel and include:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Reward"),": The number of tokens an oracle or crank turner receives for\nsuccessfully completing an on-chain action"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Slashing"),": Discouraging oracles from responding to update requests outside\na set margin of error"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Minimum Stake"),": Oracles are required to stake a minimum amount of capital\nto give them skin in the game.")),(0,a.kt)("p",null,"These economic measures help ensure that the oracles in the network provide\nreliable data and contribute to the overall security of the system."),(0,a.kt)("h3",{id:"governance"},"Governance"),(0,a.kt)("p",null,"Oracle queues can be governed by network participants to control various queue\nconfiguration parameters, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.minStake"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.reward"),",\n",(0,a.kt)("inlineCode",{parentName:"p"},"queue.slashingEnabled"),", and permitting new oracles to join the network.\nGovernance can be achieved through a decentralized autonomous organization (DAO)\nor other mechanisms, allowing the community to have a say in the network's\noperation."),(0,a.kt)("p",null,"By understanding and leveraging the features of independent oracle queues, users\ncan customize the Switchboard Network to meet their specific requirements and\nachieve the desired level of security."))}d.isMDXComponent=!0}}]);