"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7711],{54852:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(49231);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),h=a,m=p["".concat(c,".").concat(h)]||p[h]||d[h]||i;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},11622:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(95634),a=(n(49231),n(54852));const i={slug:"/architecture",title:"Program Architecture",hide_table_of_contents:!0},o=void 0,s={unversionedId:"learn/architecture",id:"learn/architecture",title:"Program Architecture",description:"Each oracle queue in the Switchboard Network is autonomous and maintains its own",source:"@site/docs/101-learn/01-architecture.mdx",sourceDirName:"101-learn",slug:"/architecture",permalink:"/architecture",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{slug:"/architecture",title:"Program Architecture",hide_table_of_contents:!0},sidebar:"sidebar",previous:{title:"The Oracle Problem",permalink:"/the-oracle-problem"},next:{title:"The Data Models",permalink:"/data"}},c={},l=[{value:"Oracle Assignment",id:"oracle-assignment",level:2},{value:"Heartbeat Requirement",id:"heartbeat-requirement",level:3},{value:"Round-Robin Assignment",id:"round-robin-assignment",level:3},{value:"Periodic Swapping of Oracle Positions",id:"periodic-swapping-of-oracle-positions",level:3},{value:"Access Control",id:"access-control",level:2},{value:"Economic Security",id:"economic-security",level:2},{value:"Governance",id:"governance",level:2}],u={toc:l},p="wrapper";function d(e){let{components:t,...i}=e;return(0,a.kt)(p,(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Each oracle queue in the Switchboard Network is autonomous and maintains its own\nconfigurations, which determine the level of security it provides. This design\nchoice enables users to tailor the oracle queue's behavior to match their\nspecific use case. Anyone can create their own queue and even run their own\nprivate Switchboard Network if desired."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Queue Architecture",src:n(45971).Z,width:"3168",height:"2208"})),(0,a.kt)("h2",{id:"oracle-assignment"},"Oracle Assignment"),(0,a.kt)("p",null,"The Switchboard Network employs a round-robin approach to assign update requests\nto oracles. This section explains the key aspects of this method and its\nbenefits for the network."),(0,a.kt)("h3",{id:"heartbeat-requirement"},"Heartbeat Requirement"),(0,a.kt)("p",null,"Oracles are required to periodically heartbeat on-chain before the\n",(0,a.kt)("inlineCode",{parentName:"p"},"queue.oracleTimeout")," to signal their readiness. If an oracle fails to heartbeat\nwithin this time frame, it will be temporarily removed from the queue and won't\nbe assigned any update requests until it successfully heartbeats again."),(0,a.kt)("p",null,"The queue utilizes ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.gcIdx")," to track its garbage collection index. If an\noracle fails to send a heartbeat before ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.oracleTimeout"),", it is removed\nfrom the queue until it sends a successful heartbeat again. This process ensures\nthat only active oracles are assigned resource update requests."),(0,a.kt)("h3",{id:"round-robin-assignment"},"Round-Robin Assignment"),(0,a.kt)("p",null,"Update requests are assigned to oracles in a round-robin fashion, ensuring a\nfair distribution of tasks among oracles. Aggregators or data feeds can specify\nthe number of oracles (N) required for each request. The system will then assign\nthe next N oracles in the queue to fulfill the request. If there are not enough\noracles in the queue, the update request will fail."),(0,a.kt)("h3",{id:"periodic-swapping-of-oracle-positions"},"Periodic Swapping of Oracle Positions"),(0,a.kt)("p",null,"To provide an element of unpredictability and mitigate the risk of oracles being\nassigned the same update requests in every iteration, oracle positions in the\nqueue are periodically swapped. This helps to further distribute tasks fairly\nand enhances the overall security of the network."),(0,a.kt)("h2",{id:"access-control"},"Access Control"),(0,a.kt)("p",null,"The Switchboard Network provides flexible access control options for each oracle\nqueue, allowing queue operators to define whether data consumers need\npre-approval or whether any requester can access the queue. This feature allows\nusers to maintain control over their data resources and the level of security\nthey require."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Oracles are ",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("strong",{parentName:"em"},"always"))," required to be granted ",(0,a.kt)("inlineCode",{parentName:"p"},"PermitOracleHeartbeat"),"\npermissions before joining a queue."),(0,a.kt)("p",{parentName:"admonition"},"With Switchboard V3 oracles are pre-approved as long as they verify their\nMRENCLAVE measurements proving they are running a given software baseline within\na trusted execution environment.")),(0,a.kt)("h2",{id:"economic-security"},"Economic Security"),(0,a.kt)("p",null,"Economic incentives are employed to encourage oracles to act honestly and\nprovide accurate data. These incentives form the basis of the queue's security\nmodel and include:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Reward"),": The number of tokens an oracle or crank turner receives for\nsuccessfully completing an on-chain action"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Slashing"),": Discouraging oracles from responding to update requests outside\na set margin of error"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Minimum Stake"),": Oracles are required to stake a minimum amount of capital\nto give them skin in the game.")),(0,a.kt)("p",null,"These economic measures help ensure that the oracles in the network provide\nreliable data and contribute to the overall security of the system."),(0,a.kt)("h2",{id:"governance"},"Governance"),(0,a.kt)("p",null,"Oracle queues can be governed by network participants to control various queue\nconfiguration parameters, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.minStake"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"queue.reward"),",\n",(0,a.kt)("inlineCode",{parentName:"p"},"queue.slashingEnabled"),", and permitting new oracles to join the network.\nGovernance can be achieved through a decentralized autonomous organization (DAO)\nor other mechanisms, allowing the community to have a say in the network's\noperation."),(0,a.kt)("p",null,"By understanding and leveraging the features of independent oracle queues, users\ncan customize the Switchboard Network to meet their specific requirements and\nachieve the desired level of security."))}d.isMDXComponent=!0},45971:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/Queue_Functions-fbc75fe50eab9b96612fd12b110001cc.png"}}]);