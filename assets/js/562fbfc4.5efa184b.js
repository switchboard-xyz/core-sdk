"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7954],{54852:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(49231);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=c(n),p=i,m=h["".concat(l,".").concat(p)]||h[p]||u[p]||r;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},58106:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(95634),i=(n(49231),n(54852));const r={slug:"/tee",title:"What are TEEs?",keywords:["Switchboard","web3","oracle","data feeds","vrf","randomness","solana","aptos","near"]},o="What are Trusted Execution Environments?",s={unversionedId:"learn/tee",id:"learn/tee",title:"What are TEEs?",description:"The following is a high level overview of TEEs and Intel Software Guard",source:"@site/docs/101-learn/20-tee.mdx",sourceDirName:"101-learn",slug:"/tee",permalink:"/tee",draft:!1,tags:[],version:"current",sidebarPosition:20,frontMatter:{slug:"/tee",title:"What are TEEs?",keywords:["Switchboard","web3","oracle","data feeds","vrf","randomness","solana","aptos","near"]},sidebar:"sidebar",previous:{title:"The Data Models",permalink:"/data"},next:{title:"Switchboard Functions",permalink:"/functions"}},l={},c=[{value:"Terminology",id:"terminology",level:2},{value:"What are Trusted Execution Environments and SGX?",id:"what-are-trusted-execution-environments-and-sgx",level:2},{value:"What problem does SGX solve?",id:"what-problem-does-sgx-solve",level:2},{value:"SGX Overview",id:"sgx-overview",level:2},{value:"Enclaves",id:"enclaves",level:2},{value:"Attestation",id:"attestation",level:2},{value:"Quote Verification",id:"quote-verification",level:2},{value:"Lifecycle",id:"lifecycle",level:2},{value:"Is SGX Secure?",id:"is-sgx-secure",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:c},h="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(h,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"what-are-trusted-execution-environments"},"What are Trusted Execution Environments?"),(0,i.kt)("p",null,"The following is a high level overview of TEEs and Intel Software Guard\nExtensions (SGX). Refer to Intel's official documentation for more info."),(0,i.kt)("h2",{id:"terminology"},"Terminology"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Term"),(0,i.kt)("th",{parentName:"tr",align:null},"Definition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-tee"}),"Trusted Execution Environment (TEE)"),(0,i.kt)("td",{parentName:"tr",align:null},"A secure environment isolated from the rest of the system, where sensitive code can be executed and sensitive data can be processed with additional protection against unauthorized access or modification. Intel SGX is an example of a TEE.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-sgx"}),"Intel SGX (Software Guard Extensions)"),(0,i.kt)("td",{parentName:"tr",align:null},"A set of security-related instruction codes built into Intel processors that provide a hardware-based method to create secure enclaves within the application's memory to protect sensitive data and code from unauthorized access or modification.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-enclave"}),"Enclave"),(0,i.kt)("td",{parentName:"tr",align:null},"A protected memory region within an application that is created and managed by Intel SGX. Enclaves provide a secure execution environment for sensitive code and data, ensuring their confidentiality and integrity.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-mrenclave"}),"MRENCLAVE"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"MRENCLAVE")," is a unique identifier in Intel SGX technology that represents the identity and integrity of a specific enclave. It is a 256-bit hash value that is derived from the enclave's code and initial data during the enclave's creation process. The main purpose of ",(0,i.kt)("inlineCode",{parentName:"td"},"MRENCLAVE")," is to enable remote attestation and ensure that the enclave running on a remote system is indeed the intended and genuine enclave.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-mrsiger"}),"MRSIGNER"),(0,i.kt)("td",{parentName:"tr",align:null},"A measurement of the signer identity of an enclave. It is a 256-bit hash value derived from the public key used to sign the enclave during the build process. MRSIGNER is used during remote attestation to verify the identity of the party who created and signed the enclave.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-attestation"}),"Remote Attestation"),(0,i.kt)("td",{parentName:"tr",align:null},"A process that allows a remote party to verify the identity, integrity, and authenticity of an enclave running on another system. Remote attestation involves generating a cryptographic report that includes MRENCLAVE and MRSIGNER values, which are then verified by the remote party.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-sealing"}),"Sealing"),(0,i.kt)("td",{parentName:"tr",align:null},"The process of encrypting data with a key that is tied to the enclave's identity, ensuring that the data can only be accessed by the same enclave or an enclave with the same identity. Sealed data is stored outside the enclave and can be used for persistent storage or data sharing between different enclaves.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{name:"term-quoting-enclave"}),"Quoting Enclave (QE)"),(0,i.kt)("td",{parentName:"tr",align:null},"A special enclave provided by Intel that is responsible for generating quotes for remote attestation. The quoting enclave signs the enclave report with the Intel Enhanced Privacy ID (EPID) private key, which is only accessible to the QE.")))),(0,i.kt)("h2",{id:"what-are-trusted-execution-environments-and-sgx"},"What are Trusted Execution Environments and SGX?"),(0,i.kt)("p",null,"A Trusted Execution Environment (TEE) is a secure area within a device's\nhardware or software that isolates sensitive data and code from the rest of the\nsystem. Intel Software Guard Extensions (SGX) is a hardware-based technology\nthat provides TEE capabilities. It allows developers to create secure enclaves\nwithin the processor where sensitive information can be processed without the\nrisk of being accessed or modified by unauthorized parties. TEEs and Intel SGX\nplay a crucial role in securing sensitive data and code, ensuring privacy and\nintegrity in various applications."),(0,i.kt)("h2",{id:"what-problem-does-sgx-solve"},"What problem does SGX solve?"),(0,i.kt)("p",null,"In today's interconnected world, ensuring the security, privacy, and\nverifiability of data and code has become increasingly important. However,\ntraditional security methods have struggled to keep up with the evolving threat\nlandscape. SGX addresses these challenges by providing a hardware-based solution\nthat protects sensitive information from unauthorized access and tampering, even\nin the presence of a compromised operating system or other privileged software.\nBy offering a secure and isolated environment for running applications, SGX\nenables developers to build trust in their systems and ensure the integrity of\ntheir data and code."),(0,i.kt)("h2",{id:"sgx-overview"},"SGX Overview"),(0,i.kt)("p",null,"Intel SGX is a set of hardware-based security features that are built into Intel\nprocessors. It allows developers to create secure enclaves within the processor,\nwhich are isolated from the rest of the system. These enclaves provide a secure\nenvironment where sensitive data and code can be processed without the risk of\nbeing accessed or modified by unauthorized parties. The key components of SGX\ninclude:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Processor support"),": Intel processors with SGX capabilities have specific\nhardware features that enable the creation and management of secure enclaves."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Enclave Page Cache (EPC)"),": A protected memory area within the processor\nthat stores the data and code associated with secure enclaves."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Memory Encryption Engine (MEE)"),": A hardware component that encrypts and\ndecrypts data as it is read from or written to the EPC."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Attestation"),": A process that allows a remote party to verify the\nauthenticity and integrity of an enclave and its contents.")),(0,i.kt)("h2",{id:"enclaves"},"Enclaves"),(0,i.kt)("p",null,"Enclaves are the central concept in Intel SGX technology. They are secure,\nisolated execution environments within the processor that protect sensitive data\nand code from unauthorized access and modification. Enclaves are created and\nmanaged by the processor, ensuring that even privileged software, such as the\noperating system or hypervisor, cannot access or tamper with the data and code\nwithin the enclave."),(0,i.kt)("p",null,"An enclave can only be accessed via specific entry points, and all data entering\nor leaving the enclave is encrypted and decrypted by the Memory Encryption\nEngine (MEE). This ensures that the contents of the enclave remain confidential\nand protected, even if the rest of the system is compromised."),(0,i.kt)("h2",{id:"attestation"},"Attestation"),(0,i.kt)("p",null,"Attestation is a critical process in Intel SGX technology that allows a remote\nparty to verify the authenticity and integrity of a secure enclave and its\ncontents. The attestation process involves the following steps:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The enclave generates a report that contains a measurement of the enclave's\ncontents (code and data) and a unique identifier."),(0,i.kt)("li",{parentName:"ul"},"The report is signed by the enclave's private key, which is only accessible\nwithin the enclave itself."),(0,i.kt)("li",{parentName:"ul"},"The signed report is sent to a remote party, who then verifies the signature\nusing the enclave's public key")),(0,i.kt)("h2",{id:"quote-verification"},"Quote Verification"),(0,i.kt)("p",null,"Quote verification is an essential step in the remote attestation process to\nensure that the code running within the enclave is genuine and un-tampered. The\nenclave provides several components as part of the measurement that forms the\nbasis for the quote."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Measurement"),": The enclave produces a measurement of its code and data,\nwhich is a cryptographic hash (usually SHA-256) that represents the enclave's\ninitial state. This measurement includes the enclave's identity, version, and\nany additional metadata required for attestation."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Report"),": The enclave generates a report containing the measurement, its\nstate, and platform information. This report is specific to the local\nplatform and cannot be used for remote attestation directly."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Target Info"),": The target info is provided by the quoting enclave, which is\nanother secure enclave responsible for generating quotes. This information\nhelps the enclave creating the report to target a specific quoting enclave\nfor the attestation process."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Report Data"),": The report data is an optional field that can be used to\ninclude additional information or a custom payload, such as a public key or a\nnonce, which can be used during the quote verification process.")),(0,i.kt)("p",null,"The quote generated by the quoting enclave primarily verifies the integrity and\nauthenticity of the enclave's measurement, ensuring that the code running within\nthe enclave has not been tampered with or altered. The quote also verifies the\nidentity and version of the enclave, providing the verifier with the necessary\ninformation to establish trust in the remote enclave."),(0,i.kt)("h2",{id:"lifecycle"},"Lifecycle"),(0,i.kt)("p",null,"The following steps outline the remote attestation sequence:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Enclave creation"),": The application creates an enclave using the SGX SDK,\nallocating memory and loading the code to be executed within the enclave."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Enclave initialization"),": The enclave is initialized, and its secure memory\nregions are prepared for use."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Remote attestation process initiation"),": The application requests a\nchallenge from the remote party, which will be used during the attestation\nprocess."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Report generation"),": The enclave generates a report containing its state,\nthe code being executed, and the platform information."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Quote generation"),": The report is converted into a quote by the quoting\nenclave, which includes the report's cryptographic signature."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Quote verification"),": The remote party verifies the quote, either\nindependently or using a trusted attestation service like Intel Attestation\nService."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Secure communication"),": If the quote is verified successfully, a secure\ncommunication channel is established between the remote party and the enclave.")),(0,i.kt)("h2",{id:"is-sgx-secure"},"Is SGX Secure?"),(0,i.kt)("p",null,"Intel's SGX has had vulnerabilities in the past but its use in secure\ncommunications and credit card privacy show its not going anywhere. Switchboard\nmitigates active vulnerabilities by requiring oracles to verify their quote once\na week, allowing the protocol to enforce patches and upgrades for vulnerability\nreports. Think of Switchboard as the management layer for managing Attestation\nquotes."),(0,i.kt)("p",null,"Switchboard also relies on economic incentives like staking and slashing to\npersuade honest behavior from participants. Economic incentives paired with TEEs\nprovides a high level of security for smart contracts to rely on for off-chain\ncomputation."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"What about Secret Network?")),(0,i.kt)("p",null,"Secret Network is a privacy, layer 1 blockchain that uses secure enclaves for\nencrypting transactions.\n",(0,i.kt)("a",{parentName:"p",href:"https://blockworks.co/news/secret-network-crypto-transactions-not-so-secret-after-all"},"Researchers were able to exploit a vulnerability in SGX"),"\nto leak the consensus seed and decrypt all past transactions.\n",(0,i.kt)("a",{parentName:"p",href:"https://twitter.com/tom_yurek/status/1597660344876699648"},"The fatal mistake was not rotating the decryption key"),"\nto prevent machines running with known vulnerabilities from attesting their\nquote. Switchboard mitigates this by requiring weekly verification of oracles\nquotes to prevent a past vulnerability from affecting future performance."),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"Intel SGX and other trusted execution environments significantly enhance the\nsecurity of computing systems by providing isolated environments for executing\nsensitive code and protecting data. Through the use of attestation and quote\nverification, these technologies enable external parties to establish trust in\nthe integrity and authenticity of the enclave, paving the way for secure\ncommunication and computation even in potentially hostile environments. By\nleveraging hardware-based isolation and cryptographic techniques, SGX and TEEs\ncan play a critical role in safeguarding sensitive information and ensuring the\nprivacy and security of modern computing systems."))}u.isMDXComponent=!0}}]);