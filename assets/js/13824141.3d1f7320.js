"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2436],{54852:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(49231);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},37892:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(95907),r=(n(49231),n(54852));const o={title:"Verifiable Randomness (VRF) on Solana",description:"",authors:["gallynaut"],tags:[],hide_table_of_contents:!0},i="Verifiable Randomness (VRF) on Solana",s={permalink:"/blog/2022/07/13/Verifiable-Randomness-on-Solana",source:"@site/blog/2022/07-13-Verifiable-Randomness-on-Solana.mdx",title:"Verifiable Randomness (VRF) on Solana",description:"",date:"2022-07-13T00:00:00.000Z",formattedDate:"July 13, 2022",tags:[],readingTime:3.14,hasTruncateMarker:!1,authors:[{name:"gallynaut",title:"Developer Relations",url:"https://twitter.com/gallynaut",imageURL:"https://pbs.twimg.com/profile_images/1649642820993679365/buRwDkVY_400x400.jpg",key:"gallynaut"}],frontMatter:{title:"Verifiable Randomness (VRF) on Solana",description:"",authors:["gallynaut"],tags:[],hide_table_of_contents:!0},prevItem:{title:"Data Feed Best Practices",permalink:"/blog/2022/08/04/Data-Feed-Best-Practices"},nextItem:{title:"Switchboard Publisher",permalink:"/blog/2022/06/22/Switchboard-Publisher"}},l={authorsImageUrls:[void 0]},c=[{value:"What is Randomness?",id:"what-is-randomness",level:2},{value:"Is Switchboard VRF Secure?",id:"is-switchboard-vrf-secure",level:2},{value:"Should I use XYZ for Randomness?",id:"should-i-use-xyz-for-randomness",level:2},{value:"How Do I Integrate Switchboard VRF?",id:"how-do-i-integrate-switchboard-vrf",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Switchboard continues to be the only provider for verifiable randomness (VRF) on\nSolana and today we are excited to announce a fee reduction bringing the overall\ncost of a VRF request down to just under ",(0,r.kt)("strong",{parentName:"p"},"0.002 SOL")," \u2014 a 50x reduction!"),(0,r.kt)("p",null,"Initially, Switchboard set the cost of a VRF request to 0.1 SOL to protect the\noracles from being overwhelmed with VRF requests, which could potentially crash\nthe oracles as they awaited the VRF proof to confirm. Switchboard oracles have\nsince migrated to using nonce accounts, or non-expiring transactions, to submit\nthe necessary proofs, reducing the oracle\u2019s memory footprint, and increasing the\noverall reliability of successfully completing the VRF proof. See the twitter\nthread below for more information."),(0,r.kt)("iframe",{src:"https://medium.com/media/6382c1a58c85f5921801b98283752f32",frameborder:"0"}),(0,r.kt)("p",null,"Switchboard will continue listening to the developer ecosystem in order to help\npower the next wave of projects on Solana. If you\u2019re a developer that is\nintegrating randomness into your application, we would love to connect and see\nhow it can be further improved."),(0,r.kt)("h2",{id:"what-is-randomness"},"What is Randomness?"),(0,r.kt)("p",null,"Random numbers are a useful building block for many applications, such as gaming\nand some consensus protocols. Without an element of randomness, games and\nprotocols can be cheated when adversaries are able to influence the outcome."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2000/1*7abFvsyHSLd4qos2ANkGiw.jpeg",alt:null})),(0,r.kt)("p",null,"While true-randomness on some computers can be made possible via ",(0,r.kt)("em",{parentName:"p"},"atmospheric\nnoise")," and special hardware modules, such solutions on blockchains are not\npossible since they are ",(0,r.kt)("em",{parentName:"p"},"virtual machines "),"without physical hardware. Thus,\npseudorandom-functions are needed to close this gap."),(0,r.kt)("p",null,"Enter Verifiable Random Function (VRF). A VRF is a public-key pseudorandom\nfunction that provides proofs that its outputs were calculated correctly. This\nmeans we can use a cryptographic keypair to generate a random number with a\nproof, which can then be validated by anyone to ensure the value was calculated\ncorrectly without the possibility of leaking the producer\u2019s secret key. You can\nread more about\n",(0,r.kt)("a",{parentName:"p",href:"https://medium.com/algorand/algorand-releases-first-open-source-code-of-verifiable-random-function-93c2960abd61"},"VRF from the Algorand team"),",\nwhose founder was one of the authors on the original VRF paper."),(0,r.kt)("h2",{id:"is-switchboard-vrf-secure"},"Is Switchboard VRF Secure?"),(0,r.kt)("p",null,"Switchboard\u2019s implementation adheres to volume 11 of the Internet Research Task\nForce\u2019s (IRTFs) draft for VRF. If you like math feel free to check it out\n",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-vrf-11"},"here"),"."),(0,r.kt)("p",null,"Once the oracle has posted the proof on-chain, anyone is permitted to turn the\ncrank and verify the proof. If a malicious oracle tries to submit a false proof,\nit will be rejected on-chain during the proof verification."),(0,r.kt)("p",null,"Switchboard\u2019s VRF implementation uses the VRF counter and the recent blockhash\nas the VRF input to prevent oracles from gaining an unfair advantage.\nUnfortunately, this means that just like any other blockchain VRF protocol,\nthere exists a collusion vector between the oracle and the block-producer,\nhowever, it is much more secure than simply using the blockhash on its own on\nits own for randomness!"),(0,r.kt)("h2",{id:"should-i-use-xyz-for-randomness"},"Should I use XYZ for Randomness?"),(0,r.kt)("p",null,"Many projects attempt to derive \u201crandomness\u201d from the latest blockhash.\nUnfortunately, while very low-cost, this is ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"extremely insecure"))," against an\nadversary with the ability to influence transaction ordering. Slot leaders could\neasily exploit your game or protocol by adding noise to the blocks they produce\nto result in \u201crandom\u201d data favorable to themselves. With the advent of MEV tech\nsuch as Flashbots, Jito Labs, and proposer-builder-separation, this attack\nvector may become more accessible to unsophisticated adversaries."),(0,r.kt)("p",null,"Another risk to be aware of is improper VRFs, such as those based on\nnon-deterministic signature schemes, like EdDSA. See\n",(0,r.kt)("a",{parentName:"p",href:"https://twitter.com/colludingnode/status/1536449312791707653"},"@colludingnode\u2019s thread"),"\nfor more details."),(0,r.kt)("p",null,"A few examples where VRF could have mitigated exploits:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://twitter.com/PierreArowana/status/1441552108734476290"},"$COPE roulette exploited when using the recent blockhash for pseudo randomness"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://twitter.com/bardstocks/status/1469346361455923208?s=21"},"Trash Panda mint sniped by bots due to predictable mint order")))),(0,r.kt)("h2",{id:"how-do-i-integrate-switchboard-vrf"},"How Do I Integrate Switchboard VRF?"),(0,r.kt)("p",null,"We have a number of resources to get started!"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://discord.com/invite/sNeGymrabT"},"Discord"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/randomness"},"VRF Documentation"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/switchboard-xyz/switchboard-v2/tree/main/programs/anchor-vrf-parser"},"Anchor VRF Example Program")))))}d.isMDXComponent=!0}}]);